# 第四章

## 4.1没有回溯的匹配

假设我们的正则是 /ab{1,3}c/，而当目标字符串是 "abbbc" 时，就没有所谓的“回溯”。其匹配过程是：
![没有回溯的匹配](https://github.com/smallmonsters/my-growth/blob/static/JavaScript/JS正则迷你书学习/没有回溯的匹配.png)

## 4.2. 有回溯的匹配

如果目标字符串是"abbc"，中间就有回溯
![有回溯的匹配](https://github.com/smallmonsters/my-growth/blob/static/JavaScript/JS正则迷你书学习/有回溯的匹配.png)

案例二

假设我们的正则是 /'.*'/，而当目标字符串是 "'abc'de" 时，其匹配过程是：
![有回溯的匹配1](https://github.com/smallmonsters/my-growth/blob/static/JavaScript/JS正则迷你书学习/有回溯的匹配1.png)

## 4.3. 常见的回溯形式

### 4.3.1 贪婪量词

之前的例子都是贪婪量词相关的。比如 b{1,3}，**_因为其是贪婪的，尝试可能的顺序是从多往少的方向去尝试_**。首先会尝试 "bbb"，然后再看整个正则是否能匹配。不能匹配时，吐出一个 "b"，即在 "bb" 的基础
上，再继续尝试。如果还不行，再吐出一个，再试。如果还不行呢？只能说明匹配失败了。

### 4.3.2 惰性量词

惰性量词就是在贪婪量词后面加个问号。表示尽可能少的匹配，

### 4.3.3 分支结构

我们知道分支也是惰性的，比如 /can|candy/，去匹配字符串 "candy"，得到的结果是 "can"，因为分支会
一个一个尝试，如果前面的满足了，后面就不会再试验了。
分支结构，可能前面的子模式会形成了局部匹配，如果接下来表达式整体不匹配时，仍会继续尝试剩下的分
支。这种尝试也可以看成一种回溯。

假设我们的正则是 /^(?:can|candy)$/，而当目标字符串是 "'abc'de" 时，其匹配过程是：
![分支回溯.png](https://github.com/smallmonsters/my-growth/blob/static/JavaScript/JS正则迷你书学习/分支回溯.png.png)

## 4.4总结

回溯是通常代量词的正则  
贪婪量词：优先匹配最大数量，不行再一个一个往下减
惰性量词：优先匹配最小数量，不行再一个一个往上加
